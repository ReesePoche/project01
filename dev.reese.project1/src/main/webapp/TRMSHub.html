<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
<title>TRMSHub</title>
</head>
<body >
	<div class="container">
		<div class="row align-items-start">
		  <div class="col">
			<h1>CompanyName</h1>
		  </div>
		  <div class="col">
			<h1>TRMS</h1>
		  </div>
		  <div class="col">
			<h4 id="employeeName">Hello! </h4>
			<button type="button" class="btn btn-secondary btn-sm" id="loginbtn" onclick="logOut()">Logout</button>
		  </div>
		</div>
	</div>
	<div class="container" id="breadCumbHeadDiv">
		<div class="col"> </div>
		<nav aria-label="breadcrumb">
			<ol class="breadcrumb">
			<li class="breadcrumb-item"><a href="#">Home</a></li>
			<li class="breadcrumb-item active" aria-current="page">TRMS Hub</li>
			</ol>
		</nav>
	</div>

	<div class="container" id="Body">
		<div class="col"> </div>
		<div class="p-3 mb-2 bg-dark text-white">
			<h6>Profile info: </h6>
			<p id="profileInfoLine"></p>
		</div>
		<div class="p-3 mb-2 bg-secondary text-white">
			<h6>Messaging</h6>
			<button type="button" class="btn btn-info bt-lg" onclick="goToMessages()">Go To Messages</button>
		</div>
		<div class="p-3 mb-2 bg-dark text-white">
			<h6>Submitted Requests</h6>
			<button type="button" class="btn btn-info bt-lg" onclick="goToSubmittedRequests()">See Your Submitted Requests</button>
		</div>
		<div class="p-3 mb-2 bg-secondary text-white">
			<h6>Payouts</h6>
			<button type="button" class="btn btn-info bt-lg" onclick="goToPayouts()">See Pending and Awarded Payouts</button>
		</div>
		<div class="p-3 mb-2 bg-dark text-white">
			<h6>New Requests</h6>
			<button type="button" class="btn btn-info bt-lg" onclick="goToSubmitNewRequest()">Submit A new Request</button>
		</div>




		
		
	</div>




	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" crossorigin="anonymous"></script>

	<script>
		var employee;
		getHubInfo();



		function getHubInfo(){
			getEmployeeInfo()
		}

		function getEmployeeInfo(){
			let xhttp = new XMLHttpRequest();
			xhttp.onreadystatechange = function() {
				if(this.readyState == 4 && this.status == 200) {
					employee = JSON.parse(this.responseText);
					console.log(this.responseText);
					console.log(employee);
					let asdf = document.getElementById("employeeName");
					asdf.innerHTML = "Hello " + employee.firstName;
					let profileInfo = document.getElementById("profileInfoLine");
					profileInfo.innerHTML = "Name: " + employee.firstName + " " + employee.lastName + "<br>Job Title: " + employee.jobTitle;
				}
			}	
			xhttp.open("GET", "http://localhost:8080/dev.reese.project1/ThisEmployeeInfo.do", true);
		
		
			xhttp.setRequestHeader('Content-Type','application/json');


			xhttp.send();
		}

	</script>
</body>

<script>

	function logOut() {
		window.location.replace("http://localhost:8080/dev.reese.project1/LoginPage.do");
	}

	function goToMessages(){
		window.location.replace("http://localhost:8080/dev.reese.project1/Messages.do");
	}

	function goToSubmittedRequests(){
		window.location.replace("http://localhost:8080/dev.reese.project1/SubmittedRequests.do");
	}

	function goToPayouts(){
		window.location.replace("http://localhost:8080/dev.reese.project1/ReimbursementPayouts.do");
	}

	function goToSubmitNewRequest(){
		window.location.replace("http://localhost:8080/dev.reese.project1/SubmitTRRForm.do");
	}
	// employee;
	// function getEmployeeInfo(){


    // function Logout() {
    
	// }
        // Make an AJAX Call
        // let xhttp = new XMLHttpRequest();
    
        // xhttp.onreadystatechange = function() {
    
        //     if(this.readyState == 4 && this.status == 200) {
        //         let responsething = this.responseText
        //         console.log(this.responseText);
        //         if(responsething == "LS"){
        //             //window.location.href = "http://localhost:8080/dev.reese.project1/TRMSHub.do";
        //             window.location.replace("http://localhost:8080/dev.reese.project1/TRMSHub.do");
        //         }
        //         else{
        //             alert("login unsucessful");
        //         }
    
        //     }
    // onload="getEmployeeInfo()"
        // }
    
    //     xhttp.open("POST", "http://localhost:8080/dev.reese.project1/LoginPage.do", true);
    
    //     //Set a Request HEader which will indicate to the Server that the Request Body will be JSON
    //     xhttp.setRequestHeader('Content-Type','application/json');
    
    //     //Send, but now we will pass in the Request Body as a parameter of the function
    //     xhttp.send(JSON.stringify(employee));
    
	// }
	</script>

</html>