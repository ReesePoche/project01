<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">

<title>Employee Login</title>
</head>
<body>

    <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
          <li class="breadcrumb-item"><a href="#">Home</a></li>
          <li class="breadcrumb-item active" aria-current="page">Login</li>
        </ol>
      </nav>

    <div class="mx-auto" style="width: 400px;">
        <div class="container">
            <div class="d-grid gap-3">
                <div class="form-floating mb-3">
                    <input type="email" class="form-control" id="email" placeholder="name@example.com" size="20">
                    <label for="email">Email address</label>
                </div>
                <div class="form-floating">
                    <input type="password" class="form-control" id="password" placeholder="Password" size="20">
                    <label for="password">Password</label>
                </div>
                <div class="mx-auto" style="width: 200px;">
                    <button type="button" class="btn btn-secondary btn-lg" id="loginbtn" onclick="attempLogin()">Login</button>
                </div>
            </div>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" crossorigin="anonymous"></script>
</body>
<script>

    function attempLogin() {
    
        let email = document.getElementById("email").value;
        let password = document.getElementById("password").value;
    
        //Lets make a JS Object with these variables and any values we will need.
        //Doing so will make it easy to make a JSON out of these values.
        let employee = {
            Eemail: email,
            Epassword: password
        }
    
    
        //Make an AJAX Call
        let xhttp = new XMLHttpRequest();
    
        xhttp.onreadystatechange = function() {
    
            if(this.readyState == 4 && this.status == 200) {
                let responsething = this.responseText
                console.log(this.responseText);
                if(responsething == "LS"){
                    //window.location.href = "http://localhost:8080/dev.reese.project1/TRMSHub.do";
                    window.location.replace("http://localhost:8080/dev.reese.project1/TRMSHub.do");
                }
                else{
                    alert("login unsucessful");
                }
    
            }
    
        }
    
        xhttp.open("POST", "http://localhost:8080/dev.reese.project1/LoginPage.do", true);
    
        //Set a Request HEader which will indicate to the Server that the Request Body will be JSON
        xhttp.setRequestHeader('Content-Type','application/json');
    
        //Send, but now we will pass in the Request Body as a parameter of the function
        xhttp.send(JSON.stringify(employee));
    
    }

    function goToHub(){

    }
    
    </script>
</html>